<!doctype html>
<html lang="{{ page.lang | default: page.language | default: site.lang | default: 'ja' }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/jpeg" href="{{ '/assets/favicon.jpg' | relative_url }}">
  <script>
    (function () {
      try {
        var storedTheme = localStorage.getItem('theme-preference');
        if (storedTheme === 'dark' || storedTheme === 'light') {
          document.documentElement.setAttribute('data-theme', storedTheme);
        }
      } catch (e) {
        /* ignore */
      }
    })();
  </script>
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  {%- seo -%}
</head>
<body>
  <div class="site">
    <header class="site-header">
      <div class="brand">
        <a class="brand-link" href="{{ '/' | relative_url }}">
          claustra01 CTF writeups
        </a>
      </div>
      <nav class="site-nav">
        <a class="nav-link" href="https://x.com/claustra01" target="_blank" rel="noopener">X</a>
        <a class="nav-link" href="https://github.com/claustra01" target="_blank" rel="noopener">GitHub</a>
        <button class="theme-toggle" type="button" data-theme-toggle aria-label="Toggle theme">
          <span class="theme-toggle-icon" aria-hidden="true">üåó</span>
        </button>
      </nav>
    </header>

    <main class="page-shell">
      <section class="page-header">
        <a class="text-link" href="{{ '/' | relative_url }}">‚Üê All writeups &amp; results</a>
        <h1 class="page-title">{{ page.title }}</h1>

        {% if page.date %}
        <div class="meta-date">{{ page.date | date: "%Y-%m-%d" }}</div>
        {% endif %}

        {% assign content_text = page.content | strip_html | strip_newlines | strip %}
        {% assign has_writeup = content_text | size %}

        <div class="meta-row">
          {% assign is_official = page.official %}
          {% if is_official %}
          <span class="pill pill-flag">Official writeup</span>
          {% endif %}

          {% if page.rank or page.total_teams %}
          {% assign rank_classes = "pill pill-rank" %}
          {% if page.rank %}
          {% assign rank_number = page.rank | plus: 0 %}
          {% if rank_number == 1 %}
          {% assign rank_classes = rank_classes | append: " pill-rank-gold" %}
          {% elsif rank_number == 2 %}
          {% assign rank_classes = rank_classes | append: " pill-rank-silver" %}
          {% elsif rank_number == 3 %}
          {% assign rank_classes = rank_classes | append: " pill-rank-bronze" %}
          {% endif %}
          {% endif %}
          <span class="{{ rank_classes }}">
            {% if page.rank %}# {{ page.rank }}{% endif %}{% if page.total_teams %}{% if page.rank %} / {% endif %}{{ page.total_teams }} Teams{% endif %}
          </span>
          {% endif %}

          {% if page.qualified %}
          <span class="pill pill-qualified">Qualified</span>
          {% endif %}

          {% if has_writeup == 0 %}
          <span class="pill pill-ghost">No writeup</span>
          {% endif %}

          {% if page.language %}
          <span class="pill pill-ghost">Lang: {{ page.language }}</span>
          {% endif %}

          {% if page.team %}
          <span class="pill pill-ghost">Team: {{ page.team }}</span>
          {% elsif not is_official %}
          <span class="pill pill-ghost">Individual</span>
          {% endif %}
        </div>

        {% if page.tags %}
        <div class="tag-row">
          {% for tag in page.tags %}
          {% assign tag_class = "tag" %}
          {% if tag == "Quals" %}
          {% assign tag_class = tag_class | append: " tag-quals" %}
          {% elsif tag == "Finals" %}
          {% assign tag_class = tag_class | append: " tag-finals" %}
          {% endif %}
          <span class="{{ tag_class }}">{{ tag }}</span>
          {% endfor %}
        </div>
        {% endif %}
      </section>

      <article class="prose">
        {% if has_writeup == 0 %}
        <p class="muted-text">No writeup content has been added yet.</p>
        {% endif %}

        {{ content }}
      </article>

      <div class="back-link">
        <a class="text-link" href="{{ '/' | relative_url }}">‚Üê All writeups &amp; results</a>
      </div>
    </main>

    <footer class="site-footer">
      <p class="footer-title">claustra01 CTF writeups</p>
      <p class="footer-sub">writeups.claustra01.net</p>
    </footer>
  </div>
  <script src="{{ '/assets/js/theme.js' | relative_url }}" defer></script>
</body>
</html>
